(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2143d0"],{afa6:function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var n=c("7a23"),a={class:"container"},s={class:"row justify-content-center wrap"},o={class:"col-md-10 bg-white shadow shopcart-layout mb-5"},i={class:"cart p-3"},l={class:"mt-4 mb-3"},r={class:"input-group-addon"},u=Object(n["h"])("i",{class:"bi bi-arrow-left"},null,-1),d=Object(n["h"])("span",{class:"ml-1 font-size-light"},"返回",-1),b=Object(n["h"])("h2",{class:"font-weight-bold mb-3"},[Object(n["h"])("i",{class:"bi bi-cart mr-0"}),Object(n["h"])("span",{class:"mr-2"},"購物車清單")],-1),h={class:"img-fluid"},p={class:"cart-content p-2"},f={class:"d-flex justify-content-between position-relative"},j={class:"font-size-light"},O=Object(n["h"])("i",{class:"bi bi-trash",style:{"font-size":"15px"}},null,-1),g={class:"ellipsis font-size-light"},m={class:"d-flex justify-content-between"},v={class:"d-flex cart-input-group"},y=Object(n["h"])("i",{class:"bi bi-dash"},null,-1),w=Object(n["h"])("i",{class:"bi bi-plus"},null,-1),C={class:"font-size-light"},k={class:"d-flex justify-content-around"},x=Object(n["h"])("p",{class:"font-size-Regular"},"總計",-1),$={class:"font-size-Regular text-danger"},z={class:"row justify-content-center mb-5"},q={class:"col-md-4"},I={class:"d-grid gap-2"};function P(t,e,c,P,S,B){var D=Object(n["A"])("FrontNavBar");return Object(n["t"])(),Object(n["e"])(n["a"],null,[Object(n["h"])(D),Object(n["h"])("div",a,[Object(n["h"])("div",s,[Object(n["h"])("div",o,[Object(n["h"])("div",i,[Object(n["h"])("div",l,[Object(n["h"])("span",r,[Object(n["h"])("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:e[1]||(e[1]=Object(n["M"])((function(){return B.backToProducts&&B.backToProducts.apply(B,arguments)}),["prevent"]))},[u])]),d]),b,(Object(n["t"])(!0),Object(n["e"])(n["a"],null,Object(n["y"])(S.cart.carts,(function(t){return Object(n["t"])(),Object(n["e"])("div",{class:"cart-list d-flex bg-light mb-5",key:t},[Object(n["h"])("div",h,[Object(n["h"])("img",{src:t.product.imageUrl,class:"cart-img mr-0"},null,8,["src"])]),Object(n["h"])("div",p,[Object(n["h"])("div",f,[Object(n["h"])("p",j,Object(n["D"])(t.product.title)+" / 一張 "+Object(n["D"])(t.product.price),1),Object(n["h"])("button",{class:"btn btn-third btn-sm delete-icon",onClick:Object(n["M"])((function(e){return B.sweetAlertConfirm(t.id)}),["prevent"]),type:"button"},[O],8,["onClick"])]),Object(n["h"])("p",g,Object(n["D"])(t.product.description),1),Object(n["h"])("div",m,[Object(n["h"])("div",v,[Object(n["h"])("button",{type:"button",class:"btn btn-secondary btn-sm px-2",onClick:Object(n["M"])((function(e){return B.updateCart(t.id,t.qty-1)}),["prevent"]),disabled:S.loadingStatus.loadingItem===t.id},[y],8,["onClick","disabled"]),Object(n["L"])(Object(n["h"])("input",{class:"form-control rounded-0",readonly:"readonly",placeholder:"1","onUpdate:modelValue":function(e){return t.qty=e}},null,8,["onUpdate:modelValue"]),[[n["G"],t.qty,void 0,{number:!0}]]),Object(n["h"])("button",{type:"button",class:"btn btn-secondary btn-sm px-2",onClick:Object(n["M"])((function(e){return B.updateCart(t.id,t.qty+1)}),["prevent"]),disabled:S.loadingStatus.loadingItem===t.id},[w],8,["onClick","disabled"])]),Object(n["h"])("p",C,"總共$ "+Object(n["D"])(t.total),1)])])])})),128)),Object(n["h"])("div",k,[x,Object(n["h"])("p",$,"$ "+Object(n["D"])(S.totalPrice),1)]),Object(n["h"])("div",z,[Object(n["h"])("div",q,[Object(n["h"])("div",I,[Object(n["h"])("button",{class:"btn btn-secondary d-flex justify-content-center",onClick:e[2]||(e[2]=Object(n["M"])((function(){return B.toOrder&&B.toOrder.apply(B,arguments)}),["prevent"])),type:"button"},"確認訂單")])])])])])])])],64)}c("99af");var S=c("a9f2"),B=c("e4f3"),D={data:function(){return{cart:{},totalPrice:{},loadingStatus:{loadingItem:""}}},components:{FrontNavBar:S["a"]},methods:{backToProducts:function(){this.$router.push("/")},getCartList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("finaltwo","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,t.totalPrice=e.data.data.final_total)})).catch((function(t){alert(t.message)}))},sweetAlertConfirm:function(t){var e=this;this.$swal({title:"確定刪除?",icon:"question",showCancelButton:!0,confirmButtonText:"確認",cancelButtonText:"取消"}).then((function(c){c.isConfirmed&&e.deleteCart(t)}))},deleteCart:function(t){var e=this;console.log(t,this.cart.carts.length);var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("finaltwo","/cart/").concat(t);this.$http.delete(c).then((function(t){t.data.success&&(e.getCartList(),B["a"].emit("update-cart"),0===e.cart.carts.length&&(alert("購物車已經沒有東西，請重新購物"),e.$http.router.push("/")))})).catch((function(t){alert(t.message)}))},updateCart:function(t,e){var c=this;this.loadingStatus.loadingItem=t;var n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("finaltwo","/cart/").concat(t),a={product_id:"id",qty:e};e>=1?(console.log(t,e),this.$http.put(n,{data:a}).then((function(t){t.data.success&&(c.getCartList(),c.loadingStatus.loadingItem="")})).catch((function(t){alert(t.message)}))):(this.loadingStatus.loadingItem="",this.$swal({position:"top",title:"票數不能少於1!",icon:"error"}))},toOrder:function(){this.$router.push("/order")}},watch:{cart:function(t,e){console.log(t.carts.length,e),0===t.carts.length&&(this.$swal({position:"top",title:"購物車已經是空的，請重新加入購物車",icon:"error"}),this.$router.push("/"))}},mounted:function(){this.getCartList()}};D.render=P;e["default"]=D}}]);
//# sourceMappingURL=chunk-2d2143d0.b116e79b.js.map