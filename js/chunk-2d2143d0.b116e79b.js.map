{"version":3,"sources":["webpack:///./src/views/Front/ShopCart.vue","webpack:///./src/views/Front/ShopCart.vue?05c5"],"names":["class","style","type","backToProducts","cart","carts","item","key","src","product","imageUrl","title","price","sweetAlertConfirm","id","description","updateCart","qty","disabled","loadingStatus","loadingItem","readonly","placeholder","total","totalPrice","toOrder","data","components","FrontNavBar","methods","this","$router","push","getCartList","url","$http","get","then","res","success","final_total","catch","err","alert","message","$swal","icon","showCancelButton","confirmButtonText","cancelButtonText","result","isConfirmed","deleteCart","console","log","length","delete","emitter","emit","router","product_id","put","position","watch","n","o","mounted","render"],"mappings":"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","file":"js/chunk-2d2143d0.b116e79b.js","sourcesContent":["<template>\n  <FrontNavBar />\n  <div class=\"container\">\n    <div class=\"row justify-content-center wrap\">\n      <div class=\"col-md-10 bg-white shadow shopcart-layout mb-5\">\n        <div class=\"cart p-3\">\n          <div class=\"mt-4 mb-3\">\n              <span class=\"input-group-addon\"><button class=\"btn btn-secondary btn-sm\" type=\"button\" @click.prevent=\"backToProducts\"><i class=\"bi bi-arrow-left\"></i></button></span>\n              <span class=\"ml-1 font-size-light\">返回</span>\n          </div>\n          <h2 class=\"font-weight-bold mb-3\"><i class=\"bi bi-cart mr-0\"></i><span class=\"mr-2\">購物車清單</span></h2>\n          <div class=\"cart-list d-flex bg-light mb-5\" v-for=\"item in cart.carts\" :key=\"item\">\n            <div class=\"img-fluid\">\n              <img :src=\"item.product.imageUrl\" class=\"cart-img mr-0\">\n            </div>\n            <div class=\"cart-content p-2\">\n              <div class=\"d-flex justify-content-between position-relative\">\n                <p class=\"font-size-light\">{{ item.product.title }} / 一張 {{item.product.price}}</p>\n                <button class=\"btn btn-third btn-sm delete-icon\" @click.prevent=\"sweetAlertConfirm(item.id)\" type=\"button\"><i class=\"bi bi-trash\" style=\"font-size: 15px;\"></i></button>\n              </div>\n              <p class=\"ellipsis font-size-light\">{{ item.product.description}}</p>\n              <div class=\"d-flex justify-content-between\">\n                <div class=\"d-flex cart-input-group\">\n                  <button type=\"button\" class=\"btn btn-secondary btn-sm px-2\" @click.prevent=\"updateCart(item.id, item.qty-1)\" :disabled=\"loadingStatus.loadingItem === item.id\"><i class=\"bi bi-dash\"></i></button>\n                  <input class=\"form-control rounded-0\" readonly=\"readonly\" placeholder=\"1\" v-model.number=\"item.qty\">\n                  <button type=\"button\" class=\"btn btn-secondary btn-sm px-2\" @click.prevent=\"updateCart(item.id, item.qty+1)\" :disabled=\"loadingStatus.loadingItem === item.id\"><i class=\"bi bi-plus\"></i></button>\n                </div>\n                <p class=\"font-size-light\">總共$ {{ item.total }}</p>\n              </div>\n            </div>\n          </div>\n          <div class=\"d-flex justify-content-around\">\n            <p class=\"font-size-Regular\">總計</p>\n            <p class=\"font-size-Regular text-danger\">$ {{ totalPrice }}</p>\n          </div>\n          <div class=\"row justify-content-center mb-5\">\n            <div class=\"col-md-4\">\n              <div class=\"d-grid gap-2\">\n                <button class=\"btn btn-secondary d-flex justify-content-center\" @click.prevent=\"toOrder\" type=\"button\">確認訂單</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FrontNavBar from '@/components/FrontNavBar.vue'\n\nimport emitter from '../../assets/javascript/emitter'\n\nexport default {\n  data () {\n    return {\n      cart: {},\n      totalPrice: {},\n      loadingStatus: {\n        loadingItem: ''\n      }\n    }\n  },\n  components: { FrontNavBar },\n  methods: {\n    backToProducts () {\n      this.$router.push('/')\n    },\n    getCartList () {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\n      this.$http.get(url).then(res => {\n        if (res.data.success) {\n          // console.log(res.data.data.carts)\n          this.cart = res.data.data\n          this.totalPrice = res.data.data.final_total\n          // console.log(this.totalPrice)\n        }\n      }).catch(err => {\n        alert(err.message)\n      })\n    },\n    sweetAlertConfirm (id) {\n      this.$swal({\n        title: '確定刪除?',\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonText: '確認',\n        cancelButtonText: '取消'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.deleteCart(id)\n        }\n      })\n    },\n    deleteCart (id) {\n      console.log(id, this.cart.carts.length)\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n      this.$http.delete(url).then(res => {\n        if (res.data.success) {\n          this.getCartList()\n          emitter.emit('update-cart')\n          if (this.cart.carts.length === 0) {\n            alert('購物車已經沒有東西，請重新購物')\n            this.$http.router.push('/')\n          }\n        }\n      }).catch(err => {\n        alert(err.message)\n      })\n    },\n    updateCart (id, qty) {\n      this.loadingStatus.loadingItem = id // 點擊後使按鈕disable的功能\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n      const data = {\n        product_id: 'id',\n        qty: qty\n      }\n      if (qty >= 1) {\n        console.log(id, qty)\n        this.$http.put(url, { data }).then(res => {\n          // console.log(res)\n          if (res.data.success) {\n            this.getCartList()\n            this.loadingStatus.loadingItem = ''\n          }\n        }).catch(err => {\n          alert(err.message)\n        })\n      } else {\n        this.loadingStatus.loadingItem = ''\n        this.$swal({\n          position: 'top',\n          title: '票數不能少於1!',\n          icon: 'error'\n        })\n      }\n    },\n    toOrder () {\n      this.$router.push('/order')\n    }\n  },\n  watch: {\n    cart (n, o) {\n      console.log(n.carts.length, o)\n      if (n.carts.length === 0) {\n        this.$swal({\n          position: 'top',\n          title: '購物車已經是空的，請重新加入購物車',\n          icon: 'error'\n        })\n        this.$router.push('/')\n      }\n    }\n  },\n  mounted () {\n    this.getCartList()\n  }\n}\n</script>\n","import { render } from \"./ShopCart.vue?vue&type=template&id=2bca8fe1\"\nimport script from \"./ShopCart.vue?vue&type=script&lang=js\"\nexport * from \"./ShopCart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}